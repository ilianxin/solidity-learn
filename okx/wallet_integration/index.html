<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>okx wallet integration</title>
</head>

<body>
    <div>
        <label class="okxwallet"></label>
    </div>
    <div>
        <button class="connectEthereumButton">Connect to Ethereum</button>
        <label class="account"></label>
    </div>
</body>
<script>
    if (typeof window.okxwallet !== 'undefined') {
        console.log('OKX is installed!');
        document.querySelector('.okxwallet').textContent = 'OKX is installed!';
    }

    const connectEthereumButton = document.querySelector('.connectEthereumButton');

    let accounts = [];

    // step1 创建连接
    connectEthereumButton.addEventListener('click', async () => {
        //Will Start the OKX extension
        accounts = await okxwallet.request({ method: 'eth_requestAccounts' });
        console.log("accounts: ", accounts);
        document.querySelector('.account').textContent = accounts[0];
    });

    // step2 监听地址变化#
    okxwallet.on('accountsChanged', (accounts) => {
        // Handle accounts changed event
        console.log('Accounts changed:', accounts);
        document.querySelector('.account').textContent = accounts[0];
    });
</script>
</html>